<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Haibin Bai - Development of Social Determinant of Health (SDOH) composite score</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-listing/list.min.js"></script>
<script src="site_libs/quarto-listing/quarto-listing.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script>

  window.document.addEventListener("DOMContentLoaded", function (_event) {
    const listingTargetEl = window.document.querySelector('#listing-listing .list');
    if (!listingTargetEl) {
      // No listing discovered, do not attach.
      return; 
    }

    const options = {
      valueNames: [{ data: ['index'] },{ data: ['categories'] },{ data: ['listing-date-sort'] },{ data: ['listing-file-modified-sort'] }],
      
      searchColumns: [],
    };

    window['quarto-listings'] = window['quarto-listings'] || {};
    window['quarto-listings']['listing-listing'] = new List('listing-listing', options);

    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  });

  window.addEventListener('hashchange',() => {
    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  })
  </script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Haibin Bai</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./ExAanalysis.html" aria-current="page">
 <span class="menu-text">Example analysis</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#research-gaps-and-objectives" id="toc-research-gaps-and-objectives" class="nav-link" data-scroll-target="#research-gaps-and-objectives">Research gaps and objectives</a></li>
  <li><a href="#intended-audience" id="toc-intended-audience" class="nav-link" data-scroll-target="#intended-audience">Intended audience</a></li>
  <li><a href="#method" id="toc-method" class="nav-link" data-scroll-target="#method">Method</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#fuctions-from-each-package" id="toc-fuctions-from-each-package" class="nav-link" data-scroll-target="#fuctions-from-each-package">Fuctions from each package</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Development of Social Determinant of Health (SDOH) composite score</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Definition:</strong> Social determinants of health (SDOH) are the conditions in the environments where people are born, live, learn, work, play, worship, and age that affect a wide range of health, functioning, and quality-of-life outcomes and risks.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SDOH.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Source: Health People 2030</figcaption><p></p>
</figure>
</div>
<section id="potential-benefits-from-sdoh" class="level4">
<h4 class="anchored" data-anchor-id="potential-benefits-from-sdoh">Potential benefits from SDOH</h4>
<ul>
<li>In United States, 3.6 million people did not receive medical care because of transportation barriers <span class="citation" data-cites="Wallace2005-yq">(<a href="#ref-Wallace2005-yq" role="doc-biblioref">Wallace et al. 2005</a>)</span></li>
<li>Hypothetical US income support policies could prevent 12,000 to 32,000 deaths among the lowest-income, working-age adult population <span class="citation" data-cites="Avancena2022-lo">(<a href="#ref-Avancena2022-lo" role="doc-biblioref">Avanceña et al. 2022</a>)</span></li>
<li>In Illinois, a 42 percent drop in participants’ health care costs almost immediately through a housing support program (Better Health Through Housing) <span class="citation" data-cites="noauthor_undated-be">(<a href="#ref-noauthor_undated-be" role="doc-biblioref"><span>“Social Determinants of Health Series: Housing and the Role of Hospitals,”</span> n.d.</a>)</span></li>
<li>SDOH are critical factors for promoting population health and well-being</li>
</ul>
</section>
<section id="current-efforts-on-sdoh" class="level4">
<h4 class="anchored" data-anchor-id="current-efforts-on-sdoh">Current efforts on SDOH</h4>
<ul>
<li>Growing movement to identify and address non-medical, social need of patients in the health care system<br>
</li>
<li>Various SDOH data are publicly available, especially area/community-level SDOH (US Census Bureau, Area Health Resource Files (AHRF), County Health Ranking (CHR), etc.)<br>
</li>
<li>Interpreting SDOH is difficult due to the complexity of data, multiple data sources, and the large number of SDOH measurements<br>
</li>
<li>Developing a composite score for SDOH could be helpful for interpretation</li>
</ul>
</section>
</section>
<section id="research-gaps-and-objectives" class="level2">
<h2 class="anchored" data-anchor-id="research-gaps-and-objectives">Research gaps and objectives</h2>
<ul>
<li>Current exist SDOH composite scores
<ul>
<li>either combined all domains of SDOH into one score (e.g., Area Deprivation Index<span class="citation" data-cites="Singh2003-gn">(<a href="#ref-Singh2003-gn" role="doc-biblioref">Singh 2003</a>)</span>, Social Vulnerability Index, SDOHi from BUSPH)</li>
<li>or targeted specific population (e.g., SDOHi from CQL)<span class="citation" data-cites="Friedman2020-eq">(<a href="#ref-Friedman2020-eq" role="doc-biblioref">Friedman 2020</a>)</span></li>
</ul></li>
<li>Few composite scores focused on each domain of SDOH</li>
<li>This study aims to develop SDOH composite score for each domain (could be narrower) and assess the SDOH composite score in predicting outcomes (e.g., utilization, readmission)</li>
</ul>
</section>
<section id="intended-audience" class="level2">
<h2 class="anchored" data-anchor-id="intended-audience">Intended audience</h2>
<p>People who interested in SDOH domain, especially in SDOH composite score.</p>
</section>
<section id="method" class="level2">
<h2 class="anchored" data-anchor-id="method">Method</h2>
<p>Loading packages</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Data source:</strong><br>
Geo Social Analytic Platform (GSAP) data<span class="citation" data-cites="Ballena2019-gx">(<a href="#ref-Ballena2019-gx" role="doc-biblioref">Ballena and JH Bloomberg School of Public Health 2019</a>)</span> in 2018, which is county-level data includes 3,220 counties</p>
<p>Data dictionary:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dictionary <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/Desktop/Johns Hopkins University/Courses/2nd Year/2nd Quarter/PH.140.840 Statistical Programming Paradigms and Workflows/Project1/Project1/dictionary.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(dictionary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">Variables</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Fuelheat</td>
<td style="text-align: left;">Gas as house heating fuel</td>
</tr>
<tr class="even">
<td style="text-align: left;">Housingvalue</td>
<td style="text-align: left;">Value of house (dollars)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kitchen</td>
<td style="text-align: left;">Kitchen facilities for all housing units</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mortgage</td>
<td style="text-align: left;">Housing units with a mortgage (units)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mortgagecost</td>
<td style="text-align: left;">Mortgage/Aggregate monthly costs</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mortgagetax</td>
<td style="text-align: left;">Median real estate taxes paid for units with a mortgage</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mortgageval</td>
<td style="text-align: left;">Housing units with a mortgage (dollars)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Occupy</td>
<td style="text-align: left;">Occupied house</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Occupyown</td>
<td style="text-align: left;">House occupied by owner</td>
</tr>
<tr class="even">
<td style="text-align: left;">Phone</td>
<td style="text-align: left;">Telephone service available</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Plumbing</td>
<td style="text-align: left;">Complete plumbing facilities</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rentgross</td>
<td style="text-align: left;">Median rent gross (dollars)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rentprcinc</td>
<td style="text-align: left;">Median rent gross as a percentage of household income</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rooms</td>
<td style="text-align: left;">Median number of rooms</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Units</td>
<td style="text-align: left;">Units in structure</td>
</tr>
<tr class="even">
<td style="text-align: left;">Unitsownpop</td>
<td style="text-align: left;">Units occupied by owner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Vehicle</td>
<td style="text-align: left;">Average number of vehicles available</td>
</tr>
<tr class="even">
<td style="text-align: left;">Yrbuilt</td>
<td style="text-align: left;">Median year structure built</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Statistical analysis:</strong><br>
used principal component analysis to classify variables into meaningful group</p>
</section>
<section id="results" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>Read dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>housing <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/Downloads/housing.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert character to numeric</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>housing <span class="ot">&lt;-</span> housing <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="sc">-</span>(<span class="st">"geoid"</span>)), as.numeric)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(housing, class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       geoid     fuelheat housingvalue      kitchen     mortgage mortgagecost 
 "character"    "numeric"    "numeric"    "numeric"    "numeric"    "numeric" 
 mortgagetax  mortgageval       occupy    occupyown        phone     plumbing 
   "numeric"    "numeric"    "numeric"    "numeric"    "numeric"    "numeric" 
   rentgross   rentprcinc        rooms        units  unitsownpop      vehicle 
   "numeric"    "numeric"    "numeric"    "numeric"    "numeric"    "numeric" 
   yr_median 
   "numeric" </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># detect and delete missing value</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(housing))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(housing)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3220   19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>housing_clean <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(housing)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(housing_clean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(housing_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3175   19</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># feature scale</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>housing_clean <span class="ot">&lt;-</span> housing_clean <span class="sc">%&gt;%</span> <span class="fu">subset</span>(<span class="at">select =</span> <span class="sc">-</span>geoid)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>preproc <span class="ot">&lt;-</span> <span class="fu">preProcess</span>(housing_clean, <span class="at">method=</span><span class="fu">c</span>(<span class="st">"range"</span>))</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>housing_norm <span class="ot">&lt;-</span> <span class="fu">predict</span>(preproc, housing_clean)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(housing_norm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    fuelheat       housingvalue        kitchen          mortgage     
 Min.   :0.0000   Min.   :0.00000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.7029   1st Qu.:0.05890   1st Qu.:0.8802   1st Qu.:0.4471  
 Median :0.8265   Median :0.08641   Median :0.9249   Median :0.5528  
 Mean   :0.7790   Mean   :0.11062   Mean   :0.9067   Mean   :0.5483  
 3rd Qu.:0.9145   3rd Qu.:0.13128   3rd Qu.:0.9554   3rd Qu.:0.6571  
 Max.   :1.0000   Max.   :1.00000   Max.   :1.0000   Max.   :1.0000  
  mortgagecost     mortgagetax      mortgageval         occupy      
 Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.6624   1st Qu.:0.1456   1st Qu.:0.5143   1st Qu.:0.7596  
 Median :0.7502   Median :0.1581   Median :0.6109   Median :0.8433  
 Mean   :0.7339   Mean   :0.1713   Mean   :0.6008   Mean   :0.8147  
 3rd Qu.:0.8262   3rd Qu.:0.1818   3rd Qu.:0.7044   3rd Qu.:0.9059  
 Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
   occupyown          phone           plumbing        rentgross     
 Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.6590   1st Qu.:0.8947   1st Qu.:0.9017   1st Qu.:0.1739  
 Median :0.7280   Median :0.9205   Median :0.9451   Median :0.2163  
 Mean   :0.7125   Mean   :0.9092   Mean   :0.9260   Mean   :0.2452  
 3rd Qu.:0.7884   3rd Qu.:0.9391   3rd Qu.:0.9723   3rd Qu.:0.2845  
 Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
   rentprcinc         rooms            units         unitsownpop    
 Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.3620   1st Qu.:0.4800   1st Qu.:0.8269   1st Qu.:0.6736  
 Median :0.4305   Median :0.5400   Median :0.9428   Median :0.7496  
 Mean   :0.4323   Mean   :0.5438   Mean   :0.8666   Mean   :0.7330  
 3rd Qu.:0.5011   3rd Qu.:0.6000   3rd Qu.:0.9745   3rd Qu.:0.8118  
 Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
    vehicle         yr_median     
 Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.5706   1st Qu.:0.9830  
 Median :0.6217   Median :0.9870  
 Mean   :0.6213   Mean   :0.9839  
 3rd Qu.:0.6727   3rd Qu.:0.9900  
 Max.   :1.0000   Max.   :1.0000  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(housing_norm)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># correlation plot</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(corr_matrix, <span class="at">method=</span><span class="st">"pie"</span>, <span class="at">hc.order =</span> <span class="cn">TRUE</span>, <span class="at">type =</span> <span class="st">"upper"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-mtcars1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ExAanalysis_files/figure-html/fig-mtcars1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Housing variables correlation matrix</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>res.pca <span class="ot">&lt;-</span> <span class="fu">PCA</span>(housing_norm, <span class="at">ncp =</span> <span class="dv">18</span>, <span class="at">graph =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>eig.val <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">get_eigenvalue</span>(res.pca))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>eig.val, <span class="fu">aes</span>(<span class="at">x=</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(eig.val), <span class="at">y=</span>eig.val<span class="sc">$</span>eigenvalue)) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Diamensions"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Eigenvalue"</span>) <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-mtcars2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ExAanalysis_files/figure-html/fig-mtcars2-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Scree plot for Factors vs Eigenvalue</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">fviz_eig</span>(res.pca, <span class="at">addlabels =</span> <span class="cn">TRUE</span>, <span class="at">ncp =</span> <span class="dv">18</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-mtcars3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ExAanalysis_files/figure-html/fig-mtcars3-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Scree plot for factors vs.&nbsp;percentage of explained variances</figcaption><p></p>
</figure>
</div>
</div></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> <span class="fu">get_pca_var</span>(res.pca)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(var<span class="sc">$</span>cos2, <span class="at">is.corr=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-mtcars4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="ExAanalysis_files/figure-html/fig-mtcars4-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;4: Variable quality in each factor</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Principal component analysis shows four dimensions/factors are appropriate to explain data variance. These four variables could explain 65.65% of variance of data. However, based on the variable quality graph, we may classify variables into three meaningful components, which could be financial, owener’s status, and house condition.<br>
- Financial:Housingvalue, Mortgage, Mortgagecost, Mortgageval, Rentgross, Mortgagetax<br>
- Owner’s status: Occupyown, Rentprcinc, Units, Unitsownpop, Vehicle, Occupy<br>
- House Condition: Fuelheat, Kitchen, Plumbing, Room<br>
- Non-classified: Phone, Yr_median</p>
</div>
</div>
</section>
<section id="fuctions-from-each-package" class="level2">
<h2 class="anchored" data-anchor-id="fuctions-from-each-package">Fuctions from each package</h2>
<p><strong>dplyr:</strong> select(), mutate_at()<br>
<strong>ggplot2:</strong> labs(), geom_line(), geom_point(), geom_hline()<br>
<strong>data.table:</strong> na.omit()</p>




</section>

<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-Avancena2022-lo" class="csl-entry" role="doc-biblioentry">
Avanceña, Anton L V, Nicholas Miller, Ellen Kim DeLuca, Bradley Iott, Amanda Mauri, Daniel Eisenberg, and David W Hutton. 2022. <span>“Estimation of Potential Deaths Averted from Hypothetical <span>US</span> Income Support Policies.”</span> <em>JAMA Health Forum</em> 3 (6): e221537.
</div>
<div id="ref-Ballena2019-gx" class="csl-entry" role="doc-biblioentry">
Ballena, Carlos, and JH Bloomberg School of Public Health. 2019. <span>“Current Projects.”</span> <a href="https://www.jhsph.edu/research/centers-and-institutes/johns-hopkins-center-for-population-health-information-technology/research/current-projects.html" class="uri">https://www.jhsph.edu/research/centers-and-institutes/johns-hopkins-center-for-population-health-information-technology/research/current-projects.html</a>.
</div>
<div id="ref-Friedman2020-eq" class="csl-entry" role="doc-biblioentry">
Friedman, Carli. 2020. <span>“The Social Determinants of Health Index.”</span> <em>Rehabil. Psychol.</em> 65 (1): 11–21.
</div>
<div id="ref-Singh2003-gn" class="csl-entry" role="doc-biblioentry">
Singh, Gopal K. 2003. <span>“Area Deprivation and Widening Inequalities in <span>US</span> Mortality, 1969–1998.”</span> <em>Am. J. Public Health</em> 93 (7): 1137–43.
</div>
<div id="ref-noauthor_undated-be" class="csl-entry" role="doc-biblioentry">
<span>“Social Determinants of Health Series: Housing and the Role of Hospitals.”</span> n.d. <a href="https://www.aha.org/ahahret-guides/2017-08-22-social-determinants-health-series-housing-and-role-hospitals" class="uri">https://www.aha.org/ahahret-guides/2017-08-22-social-determinants-health-series-housing-and-role-hospitals</a>.
</div>
<div id="ref-Wallace2005-yq" class="csl-entry" role="doc-biblioentry">
Wallace, Richard, Paul Hughes-Cromwick, Hillary Mull, and Snehamay Khasnabis. 2005. <span>“Access to Health Care and Nonemergency Medical Transportation: Two Missing Links.”</span> <em>Transp. Res. Rec.</em> 1924 (1): 76–84.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>